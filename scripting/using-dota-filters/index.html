<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<title data-react-helmet="true">Using the order filter and other filters | ModDota</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Using the order filter and other filters | ModDota"><meta data-react-helmet="true" name="description" content="Filters in general"><meta data-react-helmet="true" property="og:description" content="Filters in general"><meta data-react-helmet="true" property="og:url" content="https://moddota.com/scripting/using-dota-filters"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://moddota.com/scripting/using-dota-filters"><link rel="stylesheet" href="/styles.8da0ef93.css">
<link rel="stylesheet" href="/main.2550cfb1.css">
<link rel="preload" href="/styles.1ae2fd6e.js" as="script">
<link rel="preload" href="/runtime~main.21cb9cd0.js" as="script">
<link rel="preload" href="/main.b464052a.js" as="script">
<link rel="preload" href="/1.6984f75e.js" as="script">
<link rel="preload" href="/2.96d6c610.js" as="script">
<link rel="preload" href="/75.38cfedab.js" as="script">
<link rel="preload" href="/1be78505.5a1f44b1.js" as="script">
<link rel="preload" href="/ec1ed54d.1a08e7fd.js" as="script">
<link rel="preload" href="/b31d2738.fcfd0505.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/logo-80x80.png"><strong class="navbar__title">ModDota</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Tutorials</a><a target="_blank" rel="noopener noreferrer" href="https://dota.tools/vscripts/" class="navbar__item navbar__link">Lua API</a><a target="_blank" rel="noopener noreferrer" href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama/Javascript/API" class="navbar__item navbar__link">Panorama API</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://discord.gg/gRmZgvz" class="navbar__item navbar__link">Discord</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/logo-80x80.png"><strong class="navbar__title">ModDota</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">Tutorials</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://dota.tools/vscripts/" class="menu__link">Lua API</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama/Javascript/API" class="menu__link">Panorama API</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://discord.gg/gRmZgvz" class="menu__link">Discord</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1jis"><div class="docSidebarContainer_1kjN"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/scripting-introduction">Scripting Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Abilities, items, modifiers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/ability-keyvalues">Ability KeyValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/item-keyvalues">Item KeyValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/the-importance-of-abilityspecial-values">The importance of AbilitySpecial values</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/passing-abilityspecial-values-into-lua">Passing AbilitySpecial values into Lua</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/abilityduration-tooltips">AbilityDuration tooltips</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/simple-custom-ability">Simple Custom Ability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/creating-innate-abilities">Creating innate (available from level 1) abilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/making-any-ability-use-charges">Making any ability use charges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/calling-spells-with-setcursor">Calling Spells with SetCursor</a></li><li class="menu__list-item"><a class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Lua_Abilities_and_Modifiers" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Lua_Abilities_and_Modifiers">Lua Abilities and Modifiers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-item-tutorial">Lua Item Tutorial</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Lua Modifiers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/1">Extending Hero/NPC API with lua modifiers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/2">Linken&#x27;s Sphere &amp; Lotus Orb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/3">Transformations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/lua-modifiers/4">Enchanting Trees</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/reutilizing-built-in-modifiers">Reutilizing Built-In Modifiers</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Datadriven</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/datadriven-ability-events-modifiers">DataDriven Ability Events &amp; Modifiers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/all-about-the-target">All about the Target</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/channeling-animations">Channeling Animations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/invisibility-ability-example">Invisibility Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/illusion-ability-example">Illusion Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/rotate-ability-example">Rotate Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/point-channeling-aoe-ability-example">Point Channeling AoE Ability Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/apply-hero-and-creep-modifier-durations">Apply Hero and Creep modifier durations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/abilities/datadriven/physics-ability-example-exorcism">Physics Ability Example - Exorcism</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Units</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/unit-keyvalues">Unit KeyValues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/unit-producing-buildings">Unit producing buildings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/creating-units-with-a-duration">Creating units with a duration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/adding-a-very-simple-ai-to-units">Adding a Very Simple AI to Units</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/simple-neutral-ai">Writing a simple AI for neutrals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/units/create-creature-attachwearable-blocks-directly-from-the-keyvalues">Create Creature AttachWearable blocks directly from the keyvalues</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Scripting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/custom-mana-system">Custom Mana System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/item-restrictions-requirements">Item Restrictions &amp; Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/item-drop-system">Item Drop System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/making-a-rpg-like-looting-chest">Making a &quot;rpg-like&quot; looting chest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/scripted-shop-spawning">Scripted Shop Spawning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/lava-damage">Lava damage</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/scripting/using-dota-filters">Using the order filter and other filters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/particle-attachment">Particle Attachment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scripting/precache-fixing-and-avoiding-issues">Precache, Fixing and avoiding issues</a></li><li class="menu__list-item"><a class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Nettables" target="_blank" rel="noreferrer noopener" tabindex="0" href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Nettables">Custom NetTables</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Panorama UI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Panorama">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/panorama/inclusive-panorama-ui">Inclusive Panorama UI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/panorama/introduction-to-panorama-ui-with-typescript">Introduction to Panorama UI with TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/panorama/keybindings">Keybindings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/panorama/dotascenepanel">DOTAScenePanel</a></li><li class="menu__list-item"><a class="menu__link" to="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Game_Setup" target="_blank" rel="noreferrer noopener" tabindex="-1" href="https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Custom_Game_Setup">Custom Game Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/panorama/hiding-hud-with-sethudvisible">Hiding HUD with SetHUDVisible</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Assets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/asset-file-type-reference">Asset File Type Reference</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Maps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/maps/hammer-tutorials">Hammer Tutorials</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/maps/making-skip-clip-blocks-out-of-models">Making skip/clip blocks out of models</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Models</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/importing-custom-models">Importing custom models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/mdl-to-vmdl-conversion">MDL to VMDL Conversion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/models/adding-hitbox-to-models-without-a-bone">Adding Hitbox to Models without a Bone</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Particles</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/particle-basics">Particle Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/chaos-wave-particle">Chaos Wave Particle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/falling-cherry-blossom-petal-for-spring-mood-particle">Falling cherry blossom petal for spring mood particle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/volcano-particle">Volcano Particle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/particles/status-effects">Status Effects</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/custom-sounds">Custom Sounds</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/extracting-and-compiling-vtex-files">Extracting and Compiling VTEX files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/assets/custom-minimap-icons">Custom Minimap Icons</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tools/useful-console-commands">Useful Console Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tools/setting-up-your-addon-with-github">Setting Up Your Addon With GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tools/combining-kv-files-using-base">Combining KV files using #base</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/contribute">Contribute</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials">Tutorial overview</a></li></ul></div></div></div><main class="docMainContainer_3j_A"><div class="container padding-vert--lg docItemWrapper_1Hme"><div class="row"><div class="col docItemCol_2AGf"><div class="docItemContainer_1tAC"><article><div style="margin-top:-10px;margin-bottom:10px"><div class="row"><div class="col"><a href="https://github.com/ModDota/moddota.github.io/edit/source/_articles/scripting/using-dota-filters.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Created on <time datetime="2016-06-26T00:00:00.000Z" class="docLastUpdatedAt_1gIo">6/26/2016</time> by <strong><a href="https://steamcommunity.com/profiles/76561198046986723">Perry</a></strong></small></em></div></div></div><header><h1 class="docTitle_cWlf">Using the order filter and other filters</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="filters-in-general"></a>Filters in general<a aria-hidden="true" tabindex="-1" class="hash-link" href="#filters-in-general" title="Direct link to heading">#</a></h2><p>This tutorial explains the use of the different filter functions currentlly in the API, and illustrates this using a small example in the order filter.</p><p>There are currently 9 filters available in the lua API, namely:</p><ul><li><strong>AbilityTuningFilter</strong> - Filters abilities and all values they use on cast.</li><li><strong>BountyRunePickupFilter</strong> - Filters bounty rune pickups.</li><li><strong>DamageFilter</strong> - Filters damage events.</li><li><strong>ExecuteOrderFilter</strong> - Filters orders (usually given by players).</li><li><strong>ModifierGainedFilter</strong> - Filters modifiers events when they are first applied to a unit.</li><li><strong>ModifyExperienceFilter</strong> - Filters modifications of experience.</li><li><strong>ModifyGoldFilter</strong> - Filters modifications of gold.</li><li><strong>RuneSpawnFilter</strong> - Filters rune spawns.</li><li><strong>TrackingProjectileFilter</strong> - Filters tracking projectile launches.</li></ul><p>These filters are set using functions like <code>CDOTABaseGameMode:SetExecuteOrderFilter(function, context)</code>, check the <a href="https://github.com/TypeScriptToLua/Dota2Declarations/blob/master/dota-api.d.ts#L1193">API declarations</a> for the exact function name for each function. The filters can then be cleared again using functions like <code>CDOTABaseGameMode:ClearExecuteOrderFilter()</code> and similar functions - again, see the <a href="https://github.com/TypeScriptToLua/Dota2Declarations/blob/master/dota-api.d.ts#L1193">API declarations</a> .</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-general-idea"></a>The general idea<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-general-idea" title="Direct link to heading">#</a></h2><p><strong>(This is the most important section of this entire tutorial)</strong></p><p>The Source 2 engine listens for events, either generated by players or units in the game. The engine has a lot of handlers that determine what to do when a certain event is received. Filters get to look at these events before they reach the engine and have the opportunity to decide not to deliver the event, or maybe to deliver a modified version of the event.</p><p>An analogy to explain this is that of a company receiving mail. The regular situation would be the company(the engine) receiving mail (events) and reading them as usual. Now imagine a new secretary is hired(the filter) that reads every letter received and decides if the letter is important enough to be handled or not. This system is illustrated in the following picture:</p><p><img src="http://i.imgur.com/Op4u0Oa.png" alt="Filtering visualized"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="filters-in-lua"></a>Filters in Lua<a aria-hidden="true" tabindex="-1" class="hash-link" href="#filters-in-lua" title="Direct link to heading">#</a></h2><p>So now we know how filters work, how do we use them. This explanation will use the <code>ExecuteOrderFilter</code>, keep in mind that all filters use the same basic idea.</p><p>The first step is to set the filter using the <code>CDOTABaseGameMode:SetExecuteOrderFilter(function, context)</code> API call. Let&#x27;s analyze what this function expects. There are two parameters:</p><p><strong>Parameter: function</strong> - The filter function. This function is your actual filter. It is called every time the event you are filtering is called (in this case when an order arrives). The filter function receives two parameters: <strong>self</strong> and <strong>event</strong>. The <strong>self</strong> parameter is just the context of the function (and is hidden if you use Dynamic_Wrap and the : operator). The really interesting parameter is the <strong>event</strong> parameter. This parameter contains all the data of the event. Your filter function should look at this function and make a decision. There are three possible outcomes:</p><ol><li>You want to do nothing and accept the event, you <code>return true</code>.</li><li>You want to reject the event, it will be like this event never happened, <code>return false</code>.</li><li>You want to accept the event with some changes, all you have to do <strong>modify the event table</strong> and <code>return true</code>.</li></ol><p><strong>Parameter: context</strong> - This parameter is what is passed into the filter function as <strong>self</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="example-1-disabling-glyph"></a>Example 1: Disabling glyph<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example-1-disabling-glyph" title="Direct link to heading">#</a></h2><p>Time to put into practice what we just used. We know the glyph is an order given by a player, so we should use the order filter to disable it. All we have to do is find any glyph orders and return false. Of course you can add any restriction you want based on the contents of the event parameter. Just <code>DeepPrintTable( event )</code> to see what data is available to you.</p><p>To check which order types there are, look at the <a href="http://web.archive.org/web/20190210151632/https://developer.valvesoftware.com/wiki/Dota_2_Workshop_Tools/Scripting/API#DOTA_UNIT_ORDERS">wiki</a>.</p><p>Note that in this example the : operator on <code>GameMode:OrderFilter</code> hides the first (<code>self</code>) parameter.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-lua codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">--First set the filter to start catching events, usually this is in your init</span></div><div class="token-line" style="color:#393A34"><span class="token plain">GameRules:GetGameModeEntity():SetExecuteOrderFilter(Dynamic_Wrap(GameMode, &quot;OrderFilter&quot;), self)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">--......................</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">--Add the order filter to your game mode entity</span></div><div class="token-line" style="color:#393A34"><span class="token plain">function GameMode:OrderFilter(event)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    --Check if the order is the glyph type</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    if event.order_type == DOTA_UNIT_ORDER_GLYPH then</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return false</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    end</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    --Return true by default to keep all other orders the same</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    return true</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="example-2-order-modification"></a>Example 2: Order modification<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example-2-order-modification" title="Direct link to heading">#</a></h2><p>This example mimics a sort of &#x27;drunk&#x27; state of a unit by adding a random offset to any movement orders. The code is pretty easy, all you have to do is modify the incoming order and return true.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-lua codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">--First set the filter to start catching events, usually this is in your init</span></div><div class="token-line" style="color:#393A34"><span class="token plain">GameRules:GetGameModeEntity():SetExecuteOrderFilter(Dynamic_Wrap(GameMode, &quot;OrderFilter&quot;), self)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">--......................</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">--Add the order filter to your game mode entity</span></div><div class="token-line" style="color:#393A34"><span class="token plain">function GameMode:OrderFilter(event)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    --Check if the order is the glyph type</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    if event.order_type == DOTA_UNIT_ORDER_MOVE_TO_POSITION then</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        local offsetVector = RandomVector(100)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        event.position_x = event.position_x + offsetVector.x</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        event.position_y = event.position_y + offsetVector.y</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return true</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    end</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    --Return true by default to keep all other orders the same</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    return true</span></div><div class="token-line" style="color:#393A34"><span class="token plain">end</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/scripting/lava-damage"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Lava damage</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/scripting/particle-attachment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Particle Attachment »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_tVyB"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#filters-in-general" class="table-of-contents__link">Filters in general</a></li><li><a href="#the-general-idea" class="table-of-contents__link">The general idea</a></li><li><a href="#filters-in-lua" class="table-of-contents__link">Filters in Lua</a></li><li><a href="#example-1-disabling-glyph" class="table-of-contents__link">Example 1: Disabling glyph</a></li><li><a href="#example-2-order-modification" class="table-of-contents__link">Example 2: Order modification</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/styles.1ae2fd6e.js"></script>
<script src="/runtime~main.21cb9cd0.js"></script>
<script src="/main.b464052a.js"></script>
<script src="/1.6984f75e.js"></script>
<script src="/2.96d6c610.js"></script>
<script src="/75.38cfedab.js"></script>
<script src="/1be78505.5a1f44b1.js"></script>
<script src="/ec1ed54d.1a08e7fd.js"></script>
<script src="/b31d2738.fcfd0505.js"></script>
</body>
</html>