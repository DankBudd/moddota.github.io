"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[881],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return n?o.createElement(h,s(s({ref:t},c),{},{components:n})):o.createElement(h,s({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var u=2;u<a;u++)s[u]=n[u];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3919:(e,t,n)=>{function o(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!o(e)}n.d(t,{b:()=>o,Z:()=>r})},4996:(e,t,n)=>{n.d(t,{C:()=>a,Z:()=>s});var o=n(2263),r=n(3919);function a(){const{siteConfig:{baseUrl:e="/",url:t}={}}=(0,o.Z)();return{withBaseUrl:(n,o)=>function(e,t,n,{forcePrependBaseUrl:o=!1,absolute:a=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if((0,r.b)(n))return n;if(o)return t+n;const s=n.startsWith(t)?n:t+n.replace(/^\//,"");return a?e+s:s}(t,e,n,o)}}function s(e,t={}){const{withBaseUrl:n}=a();return n(e,t)}},8215:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(7294);const r=function({children:e,hidden:t,className:n}){return o.createElement("div",{role:"tabpanel",hidden:t,className:n},e)}},1395:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(7294),r=n(944),a=n(6010);const s="tabItem_1uMI",i="tabItemActive_2DSg";const l=37,u=39;const c=function(e){const{lazy:t,block:n,defaultValue:c,values:d,groupId:p,className:m}=e,{tabGroupChoices:h,setTabGroupChoices:f}=(0,r.Z)(),[v,g]=(0,o.useState)(c),y=o.Children.toArray(e.children),b=[];if(null!=p){const e=h[p];null!=e&&e!==v&&d.some((t=>t.value===e))&&g(e)}const k=e=>{const t=e.currentTarget,n=b.indexOf(t),o=d[n].value;g(o),null!=p&&(f(p,o),setTimeout((()=>{(function(e){const{top:t,left:n,bottom:o,right:r}=e.getBoundingClientRect(),{innerHeight:a,innerWidth:s}=window;return t>=0&&r<=s&&o<=a&&n>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(i),setTimeout((()=>t.classList.remove(i)),2e3))}),150))},w=e=>{var t;let n;switch(e.keyCode){case u:{const t=b.indexOf(e.target)+1;n=b[t]||b[0];break}case l:{const t=b.indexOf(e.target)-1;n=b[t]||b[b.length-1];break}}null==(t=n)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},m)},d.map((({value:e,label:t})=>o.createElement("li",{role:"tab",tabIndex:v===e?0:-1,"aria-selected":v===e,className:(0,a.Z)("tabs__item",s,{"tabs__item--active":v===e}),key:e,ref:e=>b.push(e),onKeyDown:w,onFocus:k,onClick:k},t)))),t?(0,o.cloneElement)(y.filter((e=>e.props.value===v))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},y.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==v})))))}},9443:(e,t,n)=>{n.d(t,{Z:()=>o});const o=(0,n(7294).createContext)(void 0)},944:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(7294),r=n(9443);const a=function(){const e=(0,o.useContext)(r.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},7840:(e,t,n)=>{n.d(t,{s:()=>r});var o=n(7294);function r({id:e,aspectRatio:t=4/3,hd:n="0"}){return o.createElement("p",{style:{position:"relative",paddingBottom:1/t*100+"%"}},o.createElement("iframe",{src:`https://gfycat.com/ifr/${e}?hd=${n}`,scrolling:"no",frameBorder:"0",allowFullScreen:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}}))}},8173:(e,t,n)=>{n.d(t,{s:()=>l});var o=n(2177),r=n(8215),a=n(1395),s=n(7294);const i={lua:"Lua",ts:"TypeScript",tsx:"TypeScript",js:"JavaScript",jsx:"JavaScript"};function l({children:e,group:t,titles:n}){(0,o.Z)("string"==typeof t||void 0===t);const l=s.Children.toArray(e).map(((e,t)=>{var o;const r=(null==(o=e.props.children.props.className)?void 0:o.replace(/language-/,""))??`Tab ${t+1}`;return{id:t,languageName:(void 0!==n&&n.length>0?n.split("|"):[])[t]??i[r]??r,element:e}}));return s.createElement(a.Z,{groupId:void 0!==t?`multi-code-block-${t}`:void 0,defaultValue:l[0].id,values:l.map((({id:e,languageName:t})=>({value:e,label:t})))},l.map((({id:e,element:t})=>s.createElement(r.Z,{key:e,value:e},t))))}},6776:(e,t,n)=>{n.d(t,{X:()=>a});var o=n(4996),r=n(7294);function a({path:e,controls:t=!1}){return r.createElement("video",{width:"100%",height:"100%",autoPlay:!0,muted:!0,loop:!0,controls:t},r.createElement("source",{src:(0,o.Z)(e),type:"video/mp4"}))}},8129:(e,t,n)=>{n.d(t,{_:()=>r});var o=n(7294);function r({id:e,playlistId:t,aspectRatio:n=16/9}){const r=void 0!==t?`https://www.youtube.com/embed/videoseries?list=${t}`:`https://www.youtube.com/embed/${e}`;return o.createElement("p",{style:{position:"relative",paddingBottom:1/n*100+"%"}},o.createElement("iframe",{src:r,frameBorder:"0",allowFullScreen:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}}))}},735:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>a,metadata:()=>s,toc:()=>i,default:()=>u});var o=n(7462),r=(n(7294),n(3905));n(1395),n(8215),n(7840),n(8129),n(8173),n(6776);const a={title:"Custom Sounds",author:"Noya",steamId:"76561198046984233",date:"10.03.2015"},s={unversionedId:"assets/custom-sounds",id:"assets/custom-sounds",isDocsHomePage:!1,title:"Custom Sounds",description:"Here's an step by step guide to custom sound events.",source:"@site/_articles/assets/custom-sounds.md",sourceDirName:"assets",slug:"/assets/custom-sounds",permalink:"/assets/custom-sounds",editUrl:"https://github.com/ModDota/moddota.github.io/edit/source/_articles/assets/custom-sounds.md",version:"current",frontMatter:{title:"Custom Sounds",author:"Noya",steamId:"76561198046984233",date:"10.03.2015"},sidebar:"tutorials",previous:{title:"Status Effects",permalink:"/assets/particles/status-effects"},next:{title:"Extracting and Compiling VTEX files",permalink:"/assets/extracting-and-compiling-vtex-files"}},i=[{value:"1 - Preparing the file",id:"1---preparing-the-file",children:[]},{value:"2 - Copy/Move the file to the content folder",id:"2---copymove-the-file-to-the-content-folder",children:[]},{value:"3 - The Custom Sounds Valve Event",id:"3---the-custom-sounds-valve-event",children:[]},{value:"Step 4 - Emitting and making sure the sound is being compiled",id:"step-4---emitting-and-making-sure-the-sound-is-being-compiled",children:[]}],l={toc:i};function u({components:e,...t}){return(0,r.kt)("wrapper",(0,o.Z)({},l,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Here's an step by step guide to custom sound events."),(0,r.kt)("h2",{id:"1---preparing-the-file"},"1 - Preparing the file"),(0,r.kt)("p",null,"You want a file with mp3 extension, .wav might work but I haven't tried it. You can convert sounds to mp3 using any decent sound editor, I use Audacity, you can download it from ",(0,r.kt)("a",{parentName:"p",href:"https://audacity.sourceforge.net/download/"},"here")),(0,r.kt)("p",null,"If you want a sound from a youtube video, I recommend using this website: ",(0,r.kt)("a",{parentName:"p",href:"https://www.vidtomp3.com/"},"https://www.vidtomp3.com/")),(0,r.kt)("h2",{id:"2---copymove-the-file-to-the-content-folder"},"2 - Copy/Move the file to the content folder"),(0,r.kt)("p",null,"Sound files to be compiled by Source2 dota need to be placed in the ",(0,r.kt)("strong",{parentName:"p"},"content\\dota_addons\\ADDON_NAME\\sounds")," folder. If you don't have it, create one."),(0,r.kt)("p",null,"Folder structure:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://puu.sh/guI0g/438a0323a4.png",alt:"img"})),(0,r.kt)("h2",{id:"3---the-custom-sounds-valve-event"},"3 - The Custom Sounds Valve Event"),(0,r.kt)("p",null,"Also inside the content folder of your addon, there should be an soundevents folder:"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://puu.sh/guI3k/1c84b64257.png",alt:"img"})),(0,r.kt)("p",null,"Create one if there isn't. Here is the place where text files with the ",(0,r.kt)("strong",{parentName:"p"},".vsndevts")," extension are located. You can name it as you want was long as you keep that extension. I usually use custom_sounds.vsndevts for all the addon's sounds, and ",(0,r.kt)("strong",{parentName:"p"},"make sure to precache this file somewhere")," (usually it's easier to do it once in Lua Precache(context) and forget about it)."),(0,r.kt)("p",null,"The structure of the file is quite simple, it's a KV list with a sound string name as the first value of each sound block and then many values that control different properties of the sounds which aren't really important most of the times if you use this code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"SoundStringName"\n{\n    "operator_stacks"\n    {\n        "update_stack"\n        {\n            "reference_operator"\n            {\n                "operator"              "sos_reference_stack"\n                "reference_stack"       "dota_src1_3d"\n                "operator_variables"\n                {\n                    "vsnd_files"\n                    {\n                        "value"\n                        {\n                              "value0"        "sounds/FileName.vsnd"\n                        }\n                    }\n                    "volume"            {   "value"     "10.00000"  }\n                    "pitch_rand_min"    {   "value"     "-0.05000"  }\n                    "pitch_rand_max"    {   "value"     "0.050000"  }\n                    "pitch"             {   "value"     "1.000000"  }\n                    "soundlevel"        {   "value"     "100.00000" }\n                    "distance_max"      {   "value"     "1600.000"  }\n                    "event_type"        {   "value"     "1.000000"  }\n                }\n            }\n        }\n    }\n}\n')),(0,r.kt)("p",null,"First ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},'"AddonName.FileName"')),", which is your desired sound string and will be used to Fire/Emit it"),(0,r.kt)("p",null,"Last and most important, the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},'"sounds/FileName.vsnd"'))," contains a relative path to the sound files ",(0,r.kt)("strong",{parentName:"p"},"compiled valveSound"),". The sound you added on the step 2 was an mp3, the engine will convert this sound to .vsnd when the ",(0,r.kt)("strong",{parentName:"p"},".vsndevts")," file is compiled/build."),(0,r.kt)("p",null,"In this whole block, the only lines you want to change when doing the new sound. Here's the whole ",(0,r.kt)("a",{parentName:"p",href:"https://pastebin.com/kcuLqZBm"},"CourierMadness' custom_sounds.vsndevts"),", as you can see, its basically a big copy paste of the same block, just changing those 2 lines."),(0,r.kt)("p",null,"You can change the volume/pitch of your sounds of course, play around the operator_variables for this."),(0,r.kt)("h2",{id:"step-4---emitting-and-making-sure-the-sound-is-being-compiled"},"Step 4 - Emitting and making sure the sound is being compiled"),(0,r.kt)("p",null,"Once the sound event file is done, you need to force the game to compile it before calling the string with KV ",(0,r.kt)("inlineCode",{parentName:"p"},'"FireSound"')," or any Lua ",(0,r.kt)("inlineCode",{parentName:"p"},"EmitSound()")," variant."),(0,r.kt)("p",null,"For this, go into the Workshop Tools Asset Browser of your addon, type the name of your custom sound event and do a Full Recompile+Reload"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://puu.sh/guIUd/4ce0b6f142.png",alt:"img"})),(0,r.kt)("p",null,"Now, if you go into your game addon folder, there should be a sounds and soundevents folder, which should contain your _c compiled version of the files made in the content folder."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://puu.sh/guJ7J/00d69a1243.png",alt:"img"})),(0,r.kt)("p",null,"If this isn't the case, go into the Asset Browser again and instead of your sound event, type the name of your sound file, and click on it, if it starts playing, it has been properly compiled."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"Thanks for reading, leave any questions below."))}u.isMDXComponent=!0},6010:(e,t,n)=>{function o(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:()=>r})}}]);