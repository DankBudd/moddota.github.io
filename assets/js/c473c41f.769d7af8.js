"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5878],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(n),c=r,f=m["".concat(s,".").concat(c)]||m[c]||d[c]||o;return n?i.createElement(f,a(a({ref:t},u),{},{components:n})):i.createElement(f,a({ref:t},u))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var p=2;p<o;p++)a[p]=n[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3919:(e,t,n)=>{function i(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!i(e)}n.d(t,{b:()=>i,Z:()=>r})},4996:(e,t,n)=>{n.d(t,{C:()=>o,Z:()=>a});var i=n(2263),r=n(3919);function o(){const{siteConfig:{baseUrl:e="/",url:t}={}}=(0,i.Z)();return{withBaseUrl:(n,i)=>function(e,t,n,{forcePrependBaseUrl:i=!1,absolute:o=!1}={}){if(!n)return n;if(n.startsWith("#"))return n;if((0,r.b)(n))return n;if(i)return t+n;const a=n.startsWith(t)?n:t+n.replace(/^\//,"");return o?e+a:a}(t,e,n,i)}}function a(e,t={}){const{withBaseUrl:n}=o();return n(e,t)}},8215:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(7294);const r=function({children:e,hidden:t,className:n}){return i.createElement("div",{role:"tabpanel",hidden:t,className:n},e)}},1395:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(7294),r=n(944),o=n(6010);const a="tabItem_1uMI",l="tabItemActive_2DSg";const s=37,p=39;const u=function(e){const{lazy:t,block:n,defaultValue:u,values:d,groupId:m,className:c}=e,{tabGroupChoices:f,setTabGroupChoices:h}=(0,r.Z)(),[y,g]=(0,i.useState)(u),b=i.Children.toArray(e.children),_=[];if(null!=m){const e=f[m];null!=e&&e!==y&&d.some((t=>t.value===e))&&g(e)}const E=e=>{const t=e.currentTarget,n=_.indexOf(t),i=d[n].value;g(i),null!=m&&(h(m,i),setTimeout((()=>{(function(e){const{top:t,left:n,bottom:i,right:r}=e.getBoundingClientRect(),{innerHeight:o,innerWidth:a}=window;return t>=0&&r<=a&&i<=o&&n>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((()=>t.classList.remove(l)),2e3))}),150))},O=e=>{var t;let n;switch(e.keyCode){case p:{const t=_.indexOf(e.target)+1;n=_[t]||_[0];break}case s:{const t=_.indexOf(e.target)-1;n=_[t]||_[_.length-1];break}}null==(t=n)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},c)},d.map((({value:e,label:t})=>i.createElement("li",{role:"tab",tabIndex:y===e?0:-1,"aria-selected":y===e,className:(0,o.Z)("tabs__item",a,{"tabs__item--active":y===e}),key:e,ref:e=>_.push(e),onKeyDown:O,onFocus:E,onClick:E},t)))),t?(0,i.cloneElement)(b.filter((e=>e.props.value===y))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},b.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==y})))))}},9443:(e,t,n)=>{n.d(t,{Z:()=>i});const i=(0,n(7294).createContext)(void 0)},944:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(7294),r=n(9443);const o=function(){const e=(0,i.useContext)(r.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},7840:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(7294);function r({id:e,aspectRatio:t=4/3,hd:n="0"}){return i.createElement("p",{style:{position:"relative",paddingBottom:1/t*100+"%"}},i.createElement("iframe",{src:`https://gfycat.com/ifr/${e}?hd=${n}`,scrolling:"no",frameBorder:"0",allowFullScreen:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}}))}},8173:(e,t,n)=>{n.d(t,{s:()=>s});var i=n(2177),r=n(8215),o=n(1395),a=n(7294);const l={lua:"Lua",ts:"TypeScript",tsx:"TypeScript",js:"JavaScript",jsx:"JavaScript"};function s({children:e,group:t,titles:n}){(0,i.Z)("string"==typeof t||void 0===t);const s=a.Children.toArray(e).map(((e,t)=>{var i;const r=(null==(i=e.props.children.props.className)?void 0:i.replace(/language-/,""))??`Tab ${t+1}`;return{id:t,languageName:(void 0!==n&&n.length>0?n.split("|"):[])[t]??l[r]??r,element:e}}));return a.createElement(o.Z,{groupId:void 0!==t?`multi-code-block-${t}`:void 0,defaultValue:s[0].id,values:s.map((({id:e,languageName:t})=>({value:e,label:t})))},s.map((({id:e,element:t})=>a.createElement(r.Z,{key:e,value:e},t))))}},6776:(e,t,n)=>{n.d(t,{X:()=>o});var i=n(4996),r=n(7294);function o({path:e,controls:t=!1}){return r.createElement("video",{width:"100%",height:"100%",autoPlay:!0,muted:!0,loop:!0,controls:t},r.createElement("source",{src:(0,i.Z)(e),type:"video/mp4"}))}},8129:(e,t,n)=>{n.d(t,{_:()=>r});var i=n(7294);function r({id:e,playlistId:t,aspectRatio:n=16/9}){const r=void 0!==t?`https://www.youtube.com/embed/videoseries?list=${t}`:`https://www.youtube.com/embed/${e}`;return i.createElement("p",{style:{position:"relative",paddingBottom:1/n*100+"%"}},i.createElement("iframe",{src:r,frameBorder:"0",allowFullScreen:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}}))}},3129:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>o,metadata:()=>a,toc:()=>l,default:()=>p});var i=n(7462),r=(n(7294),n(3905));n(1395),n(8215),n(7840),n(8129),n(8173),n(6776);const o={title:"Using Modifier Properties in tooltips",author:"DankBud",steamId:"76561198157673452",date:"05.12.2021"},a={unversionedId:"abilities/modifier-properties-in-tooltips",id:"abilities/modifier-properties-in-tooltips",isDocsHomePage:!1,title:"Using Modifier Properties in tooltips",description:"Any time you see a modifier tooltip using a non-static number it's getting its value from one of that modifier's MODIFIERPROPERTY's",source:"@site/_articles/abilities/modifier-properties-in-tooltips.md",sourceDirName:"abilities",slug:"/abilities/modifier-properties-in-tooltips",permalink:"/abilities/modifier-properties-in-tooltips",editUrl:"https://github.com/ModDota/moddota.github.io/edit/source/_articles/abilities/modifier-properties-in-tooltips.md",version:"current",frontMatter:{title:"Using Modifier Properties in tooltips",author:"DankBud",steamId:"76561198157673452",date:"05.12.2021"},sidebar:"tutorials",previous:{title:"Physics Ability Example - Exorcism",permalink:"/abilities/datadriven/physics-ability-example-exorcism"},next:{title:"Sending Server values to the Client in a modifier.",permalink:"/abilities/server-to-client"}},l=[{value:"Why is this useful?",id:"why-is-this-useful",children:[]},{value:"How to do it",id:"how-to-do-it",children:[]},{value:"The Format",id:"the-format",children:[]},{value:"MODIFIER_PROPERTY_TOOLTIP",id:"modifier_property_tooltip",children:[]},{value:"My %property% always shows 0 ??",id:"my-property-always-shows-0-",children:[]}],s={toc:l};function p({components:e,...t}){return(0,r.kt)("wrapper",(0,i.Z)({},s,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Any time you see a modifier tooltip using a non-static number it's getting its value from one of that modifier's ",(0,r.kt)("a",{parentName:"p",href:"https://moddota.com/api/#!/vscripts/modifierfunction"},"MODIFIER",(0,r.kt)("em",{parentName:"a"},"PROPERTY")),"'s"),(0,r.kt)("p",null,"some examples:\n",(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/dngijaZ.png",alt:"img"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"DOTA_Tooltip_modifier_fountain_aura_buff_Description"              "Heals %dMODIFIER_PROPERTY_HEALTH_REGEN_PERCENTAGE%%% HP and %dMODIFIER_PROPERTY_MANA_REGEN_TOTAL_PERCENTAGE%%% mana per second."\n')),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/bzU8GAF.png",alt:"img"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"DOTA_Tooltip_modifier_smoke_of_deceit_Description" "Invisible, moving %dMODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE%%% faster, and hidden from the minimap. Attacking or moving within %dMODIFIER_PROPERTY_TOOLTIP% range of an enemy hero or tower will break the invisibility."\n')),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/Xy0hTsD.png",alt:"img"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"DOTA_Tooltip_modifier_tower_aura_bonus_Description"    "Armor increased by %dMODIFIER_PROPERTY_PHYSICAL_ARMOR_BONUS% and health regeneration by %dMODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT%."\n')),(0,r.kt)("p",null,"and approximately 560 more examples in valve's ",(0,r.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/SteamDatabase/GameTracking-Dota2/master/game/dota/pak01_dir/resource/localization/abilities_english.txt"},"abilities_english.txt")),(0,r.kt)("p",null,"As you can see, all of those numbers are not manually written into the modifier description, they are dynamically grabbed from the modifier."),(0,r.kt)("h3",{id:"why-is-this-useful"},"Why is this useful?"),(0,r.kt)("p",null,"Because if you manually write the numbers into the tooltip then any time you make a number change in the ability you will have to remember to update every related tooltip, and hassle aside you're bound to miss some."),(0,r.kt)("p",null,"Using the dynamic tooltip you only have to change the number in one place and it gets updated everywhere.\nAnd you can change the number you are returning in your script during the game."),(0,r.kt)("h3",{id:"how-to-do-it"},"How to do it"),(0,r.kt)("p",null,"First, please note that this only works with Lua Modifiers and Valve's built in modifiers. It cannot be done with datadriven modifiers."),(0,r.kt)("p",null,"Any time you use a modifier property in a lua modifier the value you ",(0,r.kt)("inlineCode",{parentName:"p"},"return")," will be available for use in the modifier's description tooltip."),(0,r.kt)("p",null,"In your modifier script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"function modifier_example:DeclareFunctions()\n    return {\n        MODIFIER_PROPERTY_PREATTACK_BONUS_DAMAGE,\n    } \nend\n\nfunction modifier_example:GetModifierPreAttack_BonusDamage()\n    return 100\nend\n")),(0,r.kt)("p",null,"In your addon_\\<language",">",".txt"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"DOTA_Tooltip_modifier_example_Description" "Granting %dMODIFIER_PROPERTY_PREATTACK_BONUS_DAMAGE% bonus damage!"\n')),(0,r.kt)("p",null,"This would result in a tooltip that says: ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"Granting 100 bonus damage!"))),(0,r.kt)("p",null,"In the tooltip the percentage ",(0,r.kt)("inlineCode",{parentName:"p"},"%")," sign surrounds the MODIFIER",(0,r.kt)("em",{parentName:"p"},"PROPERTY")," to mark it as text to be replaced with the value of the modifier property.\nIf the contents between the %'s don't match the format then it wont work."),(0,r.kt)("h3",{id:"the-format"},"The Format"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"%<-><number><d|f>MODIFIER_PROPERTY_%")),(0,r.kt)("p",null,"Snippet from ",(0,r.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/SteamDatabase/GameTracking-Dota2/master/game/dota/pak01_dir/resource/localization/abilities_english.txt"},"abilities_english.txt"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// substitution for modifier tooltips\n// %dMODIFIER_PROPERTY_MAGICAL_RESISTANCE_BONUS% - 'd' prints the value returned by the function as an integer\n// 'd' for integer\n// 'f' for float\n// optional '-' to not abs() the values\n// optional number to specify the number of decimals to print after a float\n// eg: %-2fMODIFIER_PROPERTY_BASEDAMAGEOUTGOING_PERCENTAGE% \n// use %% to draw a percentage sign \ntest\n")),(0,r.kt)("p",null,"The first thing needed is a ",(0,r.kt)("inlineCode",{parentName:"p"},"d")," for integer (whole number), or ",(0,r.kt)("inlineCode",{parentName:"p"},"f")," for float (floating point number)\nNote that this is case sensitive, they must be lowercase.\nAnd one of these is required, if you try to omit it, it will not work."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"%d...%"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"%f...%")),(0,r.kt)("p",null,"Next is the modifier property name, make sure there is no empty space."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"%dMODIFIER_PROPERTY_ATTACKSPEED_BONUS_CONSTANT%"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"%fMODIFIER_PROPERTY_TOOLTIP%")),(0,r.kt)("p",null,"That's it, that's all you need for your tooltip to display."),(0,r.kt)("p",null,"But, there are 2 more options you can use."),(0,r.kt)("p",null,"By default the returned number will be absolute.\nMeaning that even if you return a negative number it will be positive in the tooltip.\nPutting a dash/minus sign ",(0,r.kt)("inlineCode",{parentName:"p"},"-")," before the d/f will make it not abs() the number, so it can be negative."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"%-dMODIFIER_PROPERTY_COOLDOWN_REDUCTION_CONSTANT%"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"%-fMODIFIER_PROPERTY_HEALTH_REGEN_CONSTANT%")),(0,r.kt)("p",null,"And with a float you can add a number before the ",(0,r.kt)("inlineCode",{parentName:"p"},"f")," to choose how many decimals to display (default 1)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"%-2fMODIFIER_PROPERTY_MANA_REGEN_CONSTANT%"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"%3fMODIFIER_PROPERTY_BASE_ATTACK_TIME_CONSTANT%")),(0,r.kt)("p",null,"and finally, if you want to write a percentage sign ",(0,r.kt)("inlineCode",{parentName:"p"},"%")," in your modifier tooltip you simply put 2 ",(0,r.kt)("inlineCode",{parentName:"p"},"%%")," next to eachother where ever you want it in the tooltip."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'"This is a percentage sign: %%"')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'"Gaining %dMODIFIER_PROPERTY_MOVESPEED_BONUS_PERCENTAGE%%% bonus movement speed"')),(0,r.kt)("h3",{id:"modifier_property_tooltip"},"MODIFIER_PROPERTY_TOOLTIP"),(0,r.kt)("p",null,"I'll leave a special note here for MODIFIER_PROPERTY_TOOLTIP and MODIFIER_PROPERTY_TOOLTIP2\nThese modifier properties do not do anything functionality wise, they exist only to display a custom number in your tooltip."),(0,r.kt)("p",null,"A simple example could be:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"function modifier_example:DeclareFunctions()\n    return {\n        MODIFIER_PROPERTY_TOOLTIP,\n        MODIFIER_PROPERTY_TOOLTIP2,\n    } \nend\n\nfunction modifier_example:OnTooltip()\n    return self:GetStackCount()\nend\nfunction modifier_example:OnTooltip2()\n    return self.number_of_killed_units\nend\n")),(0,r.kt)("h3",{id:"my-property-always-shows-0-"},"My %property% always shows 0 ??"),(0,r.kt)("p",null,"If you're having this issue then your returned value is probably only seen on the Server and not the Client.\nSee this guide for instruction: ",(0,r.kt)("a",{parentName:"p",href:"https://moddota.com/abilities/server-to-client"},"Sending Server values to the Client")))}p.isMDXComponent=!0},6010:(e,t,n)=>{function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:()=>r})}}]);