(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{171:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return s}));var a=n(2),i=(n(0),n(186));n(181),n(182),n(187),n(188),n(189);const r={title:"Creating innate (available from level 1) abilities",author:"DoctorGester",steamId:"76561198046920629",date:"27.09.2019"},l={id:"abilities/creating-innate-abilities",isDocsHomePage:!1,title:"Creating innate (available from level 1) abilities",description:"This article will guide you through creating an ability which is available to the given hero right away, like Earth Spirit's Stone Remnant.",source:"@site/_articles/abilities/creating-innate-abilities.md",permalink:"/abilities/creating-innate-abilities",editUrl:"https://github.com/ModDota/moddota.github.io/edit/source/_articles/abilities/creating-innate-abilities.md",sidebar:"tutorials",previous:{title:"Simple Custom Ability",permalink:"/abilities/simple-custom-ability"},next:{title:"Making any ability use charges",permalink:"/abilities/making-any-ability-use-charges"}},o=[{value:"Lua abilities",id:"lua-abilities",children:[]},{value:"Datadriven and builtin abilities",id:"datadriven-and-builtin-abilities",children:[]}],c={rightToc:o};function s({components:e,...t}){return Object(i.b)("wrapper",Object(a.a)({},c,t,{components:e,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This article will guide you through creating an ability which is available to the given hero right away, like Earth Spirit's Stone Remnant.\nThis guide assumes you already have an ability set up on a hero."),Object(i.b)("h2",{id:"lua-abilities"},"Lua abilities"),Object(i.b)("p",null,"Lua abilities can define a ",Object(i.b)("inlineCode",{parentName:"p"},"Spawn")," method, that is invoked by the engine when ability is cretated."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-lua"}),"my_innate_ability = my_innate_ability or {}\nfunction my_innate_ability:Spawn()\n    if IsServer() then\n        self:SetLevel(1)\n    end\nend\n")),Object(i.b)("h2",{id:"datadriven-and-builtin-abilities"},"Datadriven and builtin abilities"),Object(i.b)("p",null,"The plan is:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Subscribe to the hero spawn event"),Object(i.b)("li",{parentName:"ol"},"Determine if the spawned hero has a specific ability"),Object(i.b)("li",{parentName:"ol"},"Level it up")),Object(i.b)("p",null,"Okay. Since the entry point to every mod is the file ",Object(i.b)("inlineCode",{parentName:"p"},"addon_game_mode.lua")," go right there and find ",Object(i.b)("inlineCode",{parentName:"p"},"function Activate()"),".\nActivate is the function called on the very start of our custom game when all the players have loaded.\nWe can subscribe to events using ",Object(i.b)("inlineCode",{parentName:"p"},"ListenToGameEvent"),"."),Object(i.b)("p",null,"Put the following code inside the ",Object(i.b)("inlineCode",{parentName:"p"},"Activate")," function:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-lua"}),"ListenToGameEvent('npc_spawned', function(event)\n    HandleNpcSpawned(event.entindex)\nend, nil)\n")),Object(i.b)("p",null,"This code is subscribing to the ",Object(i.b)("inlineCode",{parentName:"p"},"npc_spawned")," event and then calling the HandleNpcSpawned function (we will create that later) with the spawned entity index.\nThat entity index is provided to us in the event table when the event is triggered."),Object(i.b)("p",null,"Let's create the ",Object(i.b)("inlineCode",{parentName:"p"},"HandleNpcSpawned")," function, put it in the same file just below ",Object(i.b)("inlineCode",{parentName:"p"},"Activate"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-lua"}),'function HandleNpcSpawned(entityIndex)\n    local entity = EntIndexToHScript(entityIndex)\n    local innateAbilityName = "my_innate_ability"\n    \n    if entity:IsRealHero() and entity:HasAbility(innateAbilityName) then\n        entity:FindAbilityByName(innateAbilityName):SetLevel(1)\n    end\nend\n')),Object(i.b)("p",null,"Let's go line by line here. After defining a function which accepts our entityIndex parameter we define a variable, which holds the actual entity.\nWe turn entity index into an actual entity using ",Object(i.b)("inlineCode",{parentName:"p"},"EntIndexToHScript"),". Now we can call methods on our actual entity.\nFirst we declare our innate ability name for easier usage.\nThen we make a condition where we check that our entity is indeed a hero and that it has that ability.\nIf all conditions hold true we get the handle of that ability and set it to level 1 right away."),Object(i.b)("p",null,"That's it! Now all heroes who have ",Object(i.b)("inlineCode",{parentName:"p"},"my_innate_ability")," will automatically have it leveled up on spawn."))}s.isMDXComponent=!0},181:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(185),l=n(183),o=n(90),c=n.n(o);const s=37,u=39;t.a=function(e){const{block:t,children:n,defaultValue:o,values:b,groupId:p}=e,{tabGroupChoices:d,setTabGroupChoices:m}=Object(r.a)(),[h,f]=Object(a.useState)(o);if(null!=p){const e=d[p];null!=e&&e!==h&&b.some(t=>t.value===e)&&f(e)}const y=e=>{f(e),null!=p&&m(p,e)},g=[];return i.a.createElement("div",null,i.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(l.a)("tabs",{"tabs--block":t})},b.map(({value:e,label:t})=>i.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":h===e,className:Object(l.a)("tabs__item",c.a.tabItem,{"tabs__item--active":h===e}),key:e,ref:e=>g.push(e),onKeyDown:e=>((e,t,n)=>{switch(n.keyCode){case u:((e,t)=>{const n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()})(e,t);break;case s:((e,t)=>{const n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()})(e,t)}})(g,e.target,e),onFocus:()=>y(e),onClick:()=>y(e)},t))),i.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter(e=>e.props.value===h)[0]))}},182:function(e,t,n){"use strict";var a=n(0),i=n.n(a);t.a=function(e){return i.a.createElement("div",null,e.children)}},183:function(e,t,n){"use strict";function a(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.a=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(i&&(i+=" "),i+=t);return i}},184:function(e,t,n){"use strict";var a=n(0);const i=Object(a.createContext)({tabGroupChoices:{},setTabGroupChoices:()=>{},isAnnouncementBarClosed:!1,closeAnnouncementBar:()=>{}});t.a=i},185:function(e,t,n){"use strict";var a=n(0),i=n(184);t.a=function(){return Object(a.useContext)(i.a)}},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),u=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},b=function(e){var t=u(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=u(n),d=a,m=b["".concat(l,".").concat(d)]||b[d]||p[d]||r;return n?i.a.createElement(m,o(o({ref:t},s),{},{components:n})):i.a.createElement(m,o({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var s=2;s<r;s++)l[s]=n[s];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},187:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),i=n.n(a);function r({id:e,aspectRatio:t=4/3}){return i.a.createElement("p",{style:{position:"relative",paddingBottom:1/t*100+"%"}},i.a.createElement("iframe",{src:"https://gfycat.com/ifr/"+e,scrolling:"no",frameBorder:"0",allowFullScreen:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}}))}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),i=n.n(a);function r({id:e,playlistId:t,aspectRatio:n=16/9}){const a=void 0!==t?"https://www.youtube.com/embed/videoseries?list="+t:"https://www.youtube.com/embed/"+e;return i.a.createElement("p",{style:{position:"relative",paddingBottom:1/n*100+"%"}},i.a.createElement("iframe",{src:a,frameBorder:"0",allowFullScreen:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0}}))}},189:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),i=n(182),r=n(181),l=n(0),o=n.n(l);const c={ts:"TypeScript",tsx:"TypeScript",js:"JavaScript",jsx:"JavaScript"};function s({children:e,group:t}){Object(a.a)("string"==typeof t||null===t);const n=o.a.Children.toArray(e).map(e=>{const t=e.props.children.props.className.replace(/language-/,"");return Object(a.a)(t in c),{language:t,element:e}});return o.a.createElement(r.a,{groupId:null!==t?"multi-code-block-"+t:void 0,defaultValue:n[0].language,values:n.map(({language:e})=>({value:e,label:c[e]}))},n.map(({language:e,element:t})=>o.a.createElement(i.a,{key:e,value:e},t)))}}}]);